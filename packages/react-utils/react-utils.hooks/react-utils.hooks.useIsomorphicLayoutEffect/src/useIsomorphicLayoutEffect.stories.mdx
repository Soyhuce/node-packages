import { useState } from 'react'
import { Meta, Canvas, Story } from '@storybook/addon-docs'

import Readme from '../README.md'
import { useIsomorphicLayoutEffect } from './useIsomorphicLayoutEffect.ts'

<Meta title='react-utils/Hooks/useIsomorphicLayoutEffect' />

<Readme />

export const Template = (args) => {
  const [value, setValue] = useState('')
  const [darkMode, setDarkMode] = useState(true)
  useIsomorphicLayoutEffect(() => {
    setDarkMode((s) => !s)
  }, [value, setDarkMode])
  return (
    <div
      style={{ backgroundColor: darkMode ? 'black' : 'white', color: darkMode ? 'white' : 'black' }}
    >
      <input onChange={(e) => setValue(e.target.value)} placeholder='Please type here' />
      <div>{value}</div>
    </div>
  )
}

<Canvas>
  <Story name='Playground'>{Template.bind({})}</Story>
</Canvas>
